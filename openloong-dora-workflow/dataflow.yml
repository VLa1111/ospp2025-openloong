nodes:
  - id: start_trigger
    custom:
      source: start_workflow.py
    outputs:
      - start_trigger

  - id: robot_workflow
    custom:
      source: robot_workflow.py
    inputs:
      start_trigger: start_trigger
      next_action: next_action
    outputs:
      - chassis_command
      - arm_command
      - workflow_status

  - id: chassis_controller
    custom:
      source: chassis_controller_client.py
    inputs:
      chassis_command: chassis_command
    outputs:
      - chassis_status

  - id: upper_controller
    custom:
      source: upper_controller_client.py
    inputs:
      arm_command: arm_command
    outputs:
      - arm_status

  - id: workflow_orchestrator
    custom:
      source: workflow_orchestrator.py
    inputs:
      chassis_status: chassis_status
      arm_status: arm_status
    outputs:
      - next_action

edges:
  - from: start_trigger
    to: robot_workflow
  - from: robot_workflow
    to: chassis_controller
  - from: robot_workflow
    to: upper_controller
  - from: chassis_controller
    to: workflow_orchestrator
  - from: upper_controller
    to: workflow_orchestrator
  - from: workflow_orchestrator
    to: robot_workflow